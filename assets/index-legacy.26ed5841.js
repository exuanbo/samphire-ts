var __vite_style__=document.createElement("style");__vite_style__.innerHTML='*,::after,::before{-webkit-box-sizing:border-box;box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}*{--tw-ring-inset:var(--tw-empty, );/*!*//*!*/--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59, 130, 246, 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000}:root{-moz-tab-size:4;-o-tab-size:4;tab-size:4}:-moz-focusring{outline:1px dotted ButtonText}:-moz-ui-invalid{box-shadow:none}::moz-focus-inner{border-style:none;padding:0}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted}a{color:inherit;text-decoration:inherit}body{margin:0;font-family:inherit;line-height:inherit}button,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0;padding:0;line-height:inherit;color:inherit}button{text-transform:none;background-color:transparent;background-image:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}[role=button],button{cursor:pointer}html{-webkit-text-size-adjust:100%;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.5}svg{display:block;vertical-align:middle}table{text-indent:0;border-color:inherit;border-collapse:collapse}textarea{resize:vertical}textarea::placeholder{opacity:1;color:#9ca3af}textarea::webkit-input-placeholder{opacity:1;color:#9ca3af}textarea::-moz-placeholder{opacity:1;color:#9ca3af}textarea:-ms-input-placeholder{opacity:1;color:#9ca3af}textarea::-ms-input-placeholder{opacity:1;color:#9ca3af}.space-x-3>:not([hidden])~:not([hidden]){--tw-space-x-reverse:0;margin-right:calc(.75rem * var(--tw-space-x-reverse));margin-left:calc(.75rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-1>:not([hidden])~:not([hidden]){--tw-space-x-reverse:0;margin-right:calc(.25rem * var(--tw-space-x-reverse));margin-left:calc(.25rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-2>:not([hidden])~:not([hidden]){--tw-space-x-reverse:0;margin-right:calc(.5rem * var(--tw-space-x-reverse));margin-left:calc(.5rem * calc(1 - var(--tw-space-x-reverse)))}.divide-y>:not([hidden])~:not([hidden]){--tw-divide-y-reverse:0;border-top-width:calc(1px * calc(1 - var(--tw-divide-y-reverse)));border-bottom-width:calc(1px * var(--tw-divide-y-reverse))}.divide-x>:not([hidden])~:not([hidden]){--tw-divide-x-reverse:0;border-right-width:calc(1px * var(--tw-divide-x-reverse));border-left-width:calc(1px * calc(1 - var(--tw-divide-x-reverse)))}.bg-gray-50{--tw-bg-opacity:1;background-color:rgba(249,250,251,var(--tw-bg-opacity))}.bg-blue-500{--tw-bg-opacity:1;background-color:rgba(59,130,246,var(--tw-bg-opacity))}.bg-red-500{--tw-bg-opacity:1;background-color:rgba(239,68,68,var(--tw-bg-opacity))}.border-b{border-bottom-width:1px}.flex{display:-webkit-box;display:-ms-flexbox;display:-webkit-flex;display:flex}.flex-col{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;-webkit-flex-direction:column;flex-direction:column}.flex-none{-webkit-box-flex:0;-ms-flex:none;-webkit-flex:none;flex:none}.flex-1{-webkit-box-flex:1;-ms-flex:1 1 0%;-webkit-flex:1 1 0%;flex:1 1 0%}.font-mono{font-family:Jetbrains Mono,monospace}.h-screen{height:100vh}.h-full{height:100%}.h-10{height:2.5rem}.h-4{height:1rem}.-ml-1{margin-left:-.25rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.px-3{padding-left:.75rem;padding-right:.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-center{text-align:center}.text-white{--tw-text-opacity:1;color:rgba(255,255,255,var(--tw-text-opacity))}.text-left{text-align:left}.leading-tight{line-height:1.25}.w-screen{width:100vw}.w-full{width:100%}.justify-between{-webkit-box-pack:justify;-ms-flex-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.justify-center{-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center}.focus\\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.resize-none{resize:none}.items-center{-webkit-box-align:center;-ms-flex-align:center;-webkit-align-items:center;align-items:center}',document.head.appendChild(__vite_style__),System.register(["./vendor-legacy.398e4a5e.js"],(function(){"use strict";var e,t,n;return{setters:[function(r){e=r.r,t=r.a,n=r.b}],execute:function(){var r,a,l,i,o,c,s,u,m=function(t){return e.createElement("svg",Object.assign({height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},t),e.createElement("path",{d:"M3 22v-20l18 10-18 10z"}))},d=function(t){return e.createElement("svg",Object.assign({height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},t),e.createElement("path",{d:"M14 12l-14 9v-18l14 9zm-4-9v4l8.022 5-8.022 5v4l14-9-14-9z"}))},f=function(t){return e.createElement("svg",Object.assign({height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},t),e.createElement("path",{d:"M6.974 22.957c-10.957-11.421 2.326-20.865 10.384-13.309l-2.464 2.352h9.106v-8.947l-2.232 2.229c-14.794-13.203-31.51 7.051-14.794 17.675z"}))},p=function(t){return e.createElement("svg",Object.assign({"data-icon":"github-alt","data-prefix":"fab",viewBox:"0 0 480 512",xmlns:"http://www.w3.org/2000/svg"},t),e.createElement("path",{d:"M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z",fill:"currentColor"}))},b=function(t){return e.createElement("svg",Object.assign({height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},t),e.createElement("path",{d:"M11.885 14.988l3.104-3.098.011.11c0 1.654-1.346 3-3 3l-.115-.012zm8.048-8.032l-3.274 3.268c.212.554.341 1.149.341 1.776 0 2.757-2.243 5-5 5-.631 0-1.229-.13-1.785-.344l-2.377 2.372c1.276.588 2.671.972 4.177.972 7.733 0 11.985-8.449 11.985-8.449s-1.415-2.478-4.067-4.595zm1.431-3.536l-18.619 18.58-1.382-1.422 3.455-3.447c-3.022-2.45-4.818-5.58-4.818-5.58s4.446-7.551 12.015-7.551c1.825 0 3.456.426 4.886 1.075l3.081-3.075 1.382 1.42zm-13.751 10.922l1.519-1.515c-.077-.264-.132-.538-.132-.827 0-1.654 1.346-3 3-3 .291 0 .567.055.833.134l1.518-1.515c-.704-.382-1.496-.619-2.351-.619-2.757 0-5 2.243-5 5 0 .852.235 1.641.613 2.342z"}))},h=function(t){return e.createElement("svg",Object.assign({height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},t),e.createElement("path",{d:"M15 12c0 1.654-1.346 3-3 3s-3-1.346-3-3 1.346-3 3-3 3 1.346 3 3zm9-.449s-4.252 8.449-11.985 8.449c-7.18 0-12.015-8.449-12.015-8.449s4.446-7.551 12.015-7.551c7.694 0 11.985 7.551 11.985 7.551zm-7 .449c0-2.757-2.243-5-5-5s-5 2.243-5 5 2.243 5 5 5 5-2.243 5-5z"}))},g=function(t){var n=t.className;return e.createElement("nav",{className:"flex items-center justify-between h-10 px-3 bg-gray-50 "+n},e.createElement("div",{className:"flex space-x-3"},e.createElement("button",{className:"flex items-center space-x-1 focus:outline-none"},e.createElement(m,{"aria-hidden":"true",className:"h-4 -ml-1"}),e.createElement("span",null,"Run")),e.createElement("button",{className:"flex items-center space-x-1 focus:outline-none"},e.createElement(d,{"aria-hidden":"true",className:"h-4"}),e.createElement("span",null,"Step")),e.createElement("button",{className:"flex items-center space-x-1 focus:outline-none"},e.createElement(f,{"aria-hidden":"true",className:"h-4"}),e.createElement("span",null,"Reset"))),e.createElement("div",{className:"flex items-center space-x-2"},e.createElement("span",null,"Assembler Simulator"),e.createElement("a",{href:"https://github.com/exuanbo/assembler-simulator",rel:"noopener noreferrer",target:"_blank"},e.createElement(p,{style:{height:"1.2rem"}}))))};(u=s||(s={})).MOV="MOV",u.ADD="ADD",u.SUB="SUB",u.MUL="MUL",u.DIV="DIV",u.INC="INC",u.DEC="DEC",u.CMP="CMP",u.JMP="JMP",u.JZ="JZ",u.JNZ="JNZ",u.END="END";var v,w,x=((r={})[s.ADD]=160,r[s.SUB]=161,r[s.MUL]=162,r[s.DIV]=163,r[s.INC]=164,r[s.DEC]=165,r),E=((a={})[s.ADD]=176,a[s.SUB]=177,a[s.MUL]=178,a[s.DIV]=182,a),y=((l={})[s.JMP]=192,l[s.JZ]=193,l[s.JNZ]=194,l),N=((i={})[s.MOV]=2,i[s.ADD]=2,i[s.SUB]=2,i[s.MUL]=2,i[s.DIV]=2,i[s.INC]=1,i[s.DEC]=1,i[s.CMP]=2,i[s.JMP]=1,i[s.JZ]=1,i[s.JNZ]=1,i[s.END]=0,i);(w=v||(v={})).Number="Number",w.Address="Address",w.Register="Register",w.RegisterPointer="RegisterPointer";var k,M,D=((o={})[v.Number]=/^([0-9A-F]{1,2})$/,o[v.Address]=/^\[([0-9A-F]{1,2})\]$/,o[v.Register]=/^([ABCD]L)$/,o[v.RegisterPointer]=/^\[([ABCD]L)\]$/,o);(M=k||(k={})).AL="AL",M.BL="BL",M.CL="CL",M.DL="DL";var z=((c={})[k.AL]=0,c[k.BL]=1,c[k.CL]=2,c[k.DL]=3,c),C=function(e){for(var t=function(e){return function(t){var n,r=null==(n=D[t].exec(e))?void 0:n[1];if(void 0!==r){var a=function(){switch(t){case v.Number:case v.Address:return Number.parseInt(r,16);case v.Register:case v.RegisterPointer:return z[r]}}();return{type:t,value:a}}return null}}(e),n=0,r=Object.values(v);n<r.length;n++){var a=t(r[n]);if(null!==a)return a}throw new Error("Invalid operand "+e)},A=function(e){return void 0!==e},S=function(e){return e.toString(16).padStart(2,"0").toUpperCase()},j=function(e){return Object.entries(z).map((function(t){var n=t[0];if(t[1]===e)return n})).filter(A)[0]},R=function(e){var t=S(e.value);switch(e.type){case v.Number:return""+t;case v.Address:return"["+t+"]";case v.Register:return j(e.value);case v.RegisterPointer:return"["+j(e.value)+"]"}},I=function(e,t,n){switch(e){case s.MOV:return function(e,t){if(e.type===v.Number)throw new Error("The first operand of MOV can not be number, but got "+R(e));switch(e.type){case v.Register:switch(t.type){case v.Number:return 208;case v.Address:return 209;case v.RegisterPointer:return 211;case v.Register:default:throw new Error("The second operand of MOV can not be register, but got "+R(t))}case v.Address:case v.RegisterPointer:if(t.type===v.Register)return e.type===v.Address?210:212;throw new Error("The second operand of MOV must be register, but got "+R(t))}}(t,n);case s.ADD:case s.SUB:case s.MUL:case s.DIV:case s.INC:case s.DEC:return function(e,t,n){if(t.type!==v.Register)throw new Error("The first operand of "+e+" must be register, but got "+R(t));if(void 0===n)return x[e];switch(n.type){case v.Register:return x[e];case v.Number:return E[e];case v.Address:case v.RegisterPointer:throw new Error("The second operand of "+e+" must be register or number, but got "+R(n))}}(e,t,n);case s.CMP:return function(e,t){if(e.type!==v.Register)throw new Error("The first operand of CMP must be register, but got "+R(e));switch(t.type){case v.Register:return 218;case v.Number:return 219;case v.Address:return 220;case v.RegisterPointer:throw new Error("The second operand of CMP can not be address with register, but got "+R(t))}}(t,n);case s.JMP:case s.JZ:case s.JNZ:return y[e]}},L=function(e){return new Uint8Array(256).map((function(t,n){return e&&n>=192?32:0}))},P=function(e){var t=L(!0),n=0;return e.statements.forEach((function(e){var r=function(e){var t=e.instruction,n=e.operands;if(t===s.END)return[0];if(null!==n){var r=n[0],a=n[1],l=C(r),i=void 0!==a?C(a):void 0;return[I(t,l,i),l.value,null==i?void 0:i.value].filter(A)}return null}(e);null!==r&&r.forEach((function(e){t[n]=e,n++}))})),t},B=t("mov al, 5A\nmov bl, D3\n\nloop:\nmov [bl], al\ndec al\ncmp al, 40\njz done\ninc bl\njz reset\njmp loop\n\nreset:\nmov bl, c0\njmp loop\n\ndone:\nend\n"),J=t({statements:[],labels:[]}),U=t(L(!0)),O=t(null),_=function(){var t=O.useState()[0];return e.createElement("div",{className:"px-3 py-1 text-white "+(null===t?"bg-blue-500":"bg-red-500")},null===t?"Looks good so far :D":t)},T=function(e){return e.split("\n").map((function(e){var t,n=e.replace(/;.*/,"").trim().toUpperCase();if(0!==n.length){if(n.endsWith(":"))return{instruction:n,operands:null};var r=n.search(/\s/),a=n.slice(0,-1===r?n.length:r);if(!function(e){return e in s}(a))throw new Error("Invalid instruction "+a);var l=-1===r?null:n.slice(r).replace(/\s/g,"").split(","),i=null!=(t=null==l?void 0:l.length)?t:0;if(i>2)throw new Error("Got "+i+" (> 2) operands");var o=N[a];if(i!==o)throw new Error("Expect "+a+" to have "+o+" operand"+(o>1?"s":"")+", but got "+i);return{instruction:a,operands:null!==l?i>1?[l[0],l[1]]:[l[0]]:null}}})).filter(A)},V=function(e,t){return t.slice(0,e).map((function(e){var t,n;return 1+(null!=(t=null==(n=e.operands)?void 0:n.length)?t:0)})).reduce((function(e,t){return e+t}))},Z=function(e,t){return t.map((function(n,r){return function(e){return[s.JMP,s.JZ,s.JNZ].some((function(t){return e.instruction===t}))}(n)&&e.forEach((function(e){if(n.operands[0]===e.name){var a=V(r,t),l=e.address-a,i=S(l>0?l:256+l);n.operands=[i]}})),n}))},$=function(e){return!e.instruction.endsWith(":")},F=function(e){return t=T(e),n=0,r=t.map((function(e,r){if(!$(e)){var a=V(r,t)-n;return n++,{name:e.instruction.slice(0,-1),address:a}}})).filter(A),a=t.filter($),{statements:Z(r,a),labels:r};var t,n,r,a},H=function(t){var n=t.className,r=B.useState(),a=r[0],l=r[1],i=J.useState()[1],o=U.useState()[1],c=O.useState()[1],s=e.useRef(null),u=function(){try{var e=F(a);i(e);var t=P(e);o(t),c(null)}catch(n){c(n.message)}};return e.useEffect((function(){var e=setTimeout(u,200);return function(){clearTimeout(e)}}),[a]),e.createElement("div",{className:"flex flex-col "+n},e.createElement("textarea",{ref:s,className:"w-full h-full px-3 py-1 font-mono resize-none focus:outline-none",spellCheck:!1,value:a,onChange:function(e){l(e.target.value)},onKeyDown:function(e){if("Tab"===e.key){e.preventDefault();var t=s.current;if(null!==t){var n=t.selectionStart,r=t.selectionEnd,a=t.value;t.value=a.substring(0,n)+"\t"+a.substring(r),t.selectionStart=t.selectionEnd=n+1}}}}),e.createElement(_,null))},W=function(t){var n=t.className,r=t.title,a=t.Icon,l=t.onIconClick,i=t.children;return e.createElement("div",{className:n},e.createElement("header",{className:"flex justify-between w-full px-3 py-1 border-b bg-gray-50"},e.createElement("span",null,r),void 0!==a?e.createElement("button",{className:"flex flex-col justify-center focus:outline-none",onClick:l},e.createElement(a,null)):null),i)},G=function(){return e.createElement(W,{title:"Input / Output Devices"})},K=function(){return e.createElement(W,{title:"CPU Registers"})},q=function(){var t,n=U.useState()[0],r=(t=16,n.reduce((function(e,n,r){var a=Math.floor(r/t);return void 0===e[a]&&(e[a]=[]),e[a].push(n),e}),[]));return e.createElement(W,{title:"Memory"},e.createElement("table",{className:"w-full font-mono text-sm leading-tight divide-y"},e.createElement("thead",null,e.createElement("tr",{className:"divide-x bg-gray-50"},e.createElement("th",null),r[0].map((function(t,n){return e.createElement("th",{key:"col-index-"+n,className:"text-center"},S(n)[1])})))),e.createElement("tbody",{className:"divide-y"},r.map((function(t,n){return e.createElement("tr",{key:"row-"+n,className:"divide-x"},e.createElement("td",{className:"text-center bg-gray-50"},S(n)[1]),t.map((function(t,r){return e.createElement("td",{key:"row-"+n+"-col-"+r,className:"text-center"},S(t))})))})))))},Q=function(){var t=e.useState(!0),n=t[0],r=t[1],a=J.useState()[0],l=a.statements,i=a.labels;return e.createElement(W,{Icon:function(){return n?e.createElement(b,{className:"h-4"}):e.createElement(h,{className:"h-4"})},title:"Tokens",onIconClick:function(){r(!n)}},n?e.createElement("div",{className:"flex divide-x"},e.createElement(W,{className:"flex-1",title:"Statements"},e.createElement("div",{className:"px-3 py-1 border-b"},l.length>0?e.createElement("table",{className:"w-full text-sm leading-narrow"},e.createElement("thead",null,e.createElement("tr",{className:"text-left"},e.createElement("th",null,"Instruction"),e.createElement("th",null,"Operand"),e.createElement("th",null,"Operand"))),e.createElement("tbody",null,l.map((function(t,n){var r;return e.createElement("tr",{key:"statement-"+n},e.createElement("td",null,t.instruction),null==(r=t.operands)?void 0:r.map((function(t,r){return e.createElement("td",{key:"statement-"+n+"-operand-"+r,className:"font-mono"},t)})))})))):null)),e.createElement(W,{className:"flex-1",title:"Labels"},e.createElement("div",{className:"px-3 py-1 border-b"},i.length>0?e.createElement("table",{className:"w-full text-sm leading-narrow"},e.createElement("thead",null,e.createElement("tr",{className:"text-left"},e.createElement("th",null,"Name"),e.createElement("th",null,"Address"))),e.createElement("tbody",null,i.map((function(t,n){return e.createElement("tr",{key:"label-"+n},e.createElement("td",null,t.name),e.createElement("td",{className:"font-mono"},S(t.address)))})))):null))):null)},X=function(){return e.createElement("div",{className:"flex flex-col w-screen h-screen divide-y"},e.createElement(g,{className:"flex-none"}),e.createElement("div",{className:"flex h-full divide-x"},e.createElement(H,{className:"flex-1"}),e.createElement("div",{className:"flex-1 divide-y"},e.createElement(G,null),e.createElement(K,null),e.createElement(q,null),e.createElement(Q,null))))};n.render(e.createElement(e.StrictMode,null,e.createElement(X,null)),document.getElementById("root"))}}}));
